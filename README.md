# ExploreWithMe (EWM) Platform

ExploreWithMe – это платформа для поиска и организации мероприятий, управления заявками, рейтингов и аналитики, разработанная с использованием микросервисной архитектуры. Этот проект представляет собой модернизированную версию существующего монолитного приложения, которая подготовлена к высоким нагрузкам и масштабируемости.

---

## Архитектура

### Компоненты системы

1. **Discovery Server (Eureka)**:
    - Реализует сервис-ориентированное обнаружение.
    - Позволяет микросервисам регистрироваться и находить друг друга.

2. **Config Server**:
    - Централизованное хранилище конфигураций.
    - Упрощает управление настройками всех микросервисов.

3. **Gateway Server**:
    - API Gateway для маршрутизации запросов.
    - Инкапсулирует внутреннюю архитектуру, предоставляя единый входной API.

4. **Stats Service**:
    - Собирает и анализирует статистику по запросам пользователей.

5. **Event Service**:
    - Управляет событиями, категориями и компиляциями.

6. **Rating Service**:
    - Реализует функционал рейтингов мероприятий.

7. **Request Service**:
    - Управляет заявками на участие в мероприятиях.

8. **User Service**:
    - Обеспечивает управление профилями пользователей.

---

## Взаимодействие между сервисами

Микросервисы взаимодействуют друг с другом через:
- **OpenFeign** – для межсервисной коммуникации.
- **Eureka** – для динамического поиска сервисов.
- **API Gateway** – для маршрутизации внешних запросов к соответствующим сервисам.

Каждый микросервис обладает собственной базой данных на основе PostgreSQL и взаимодействует с другими сервисами через REST API.

---

## Внутренний API для взаимодействия сервисов

### Основные эндпоинты

- **Event Service**:
    - Публичные маршруты для событий: `/events/**`
    - Административные маршруты для управления событиями: `/admin/events/**`

- **Rating Service**:
    - Управление рейтингами: `/users/{userId}/ratings/**`

- **Request Service**:
    - Управление заявками: `/users/{userId}/requests/**`
    - Управление заявками для событий: `/users/{userId}/events/{eventId}/requests/**`

- **User Service**:
    - Управление пользователями: `/admin/users/**`

---

## Конфигурация

Все конфигурации для микросервисов хранятся централизованно в **Config Server**. Взаимодействие настроено через Spring Cloud Config, который обеспечивает динамическое получение конфигурации.

---

## Этапы разработки

### Этап 1: Переход на облачную инфраструктуру
- Внедрение Spring Cloud Gateway, Eureka и Config Server.
- Централизованное управление конфигурацией и маршрутизацией запросов.

### Этап 2: Разделение на микросервисы
- Перенос функционала в отдельные модули (управление событиями, заявками, пользователями).
- Настройка маршрутизации и взаимодействия между сервисами через Feign и Eureka.

### Этап 3: Реализация аналитики и рекомендаций
- Добавление потоковой обработки данных для анализа пользовательских предпочтений.
- Использование Apache Kafka для реализации рекомендательных алгоритмов.

---

## Инструкция по запуску

### Предварительные требования

- Docker и Docker Compose установлены на вашем устройстве.

### Запуск проекта

1. Клонируйте репозиторий:
   ```bash
   git clone <url>
   cd <project-directory>